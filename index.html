<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NCAT Crash Course</title>

<style>
body{font-family:Arial;background:#f4f6f8;margin:0}
.container{max-width:900px;margin:30px auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
h1,h2{text-align:center}
.hidden{display:none}
button{padding:10px 20px;border:none;border-radius:6px;cursor:pointer;background:#2563eb;color:#fff;font-size:16px}
button:hover{background:#1e40af}
#timer{font-size:18px;font-weight:bold;color:#dc2626;text-align:center;margin-bottom:15px}
table{width:100%;border-collapse:collapse;margin-top:20px}
th,td{border:1px solid #ccc;padding:8px;text-align:center}
th{background:#e5e7eb}
input{width:100%;padding:8px}
</style>
</head>

<body>

<!-- LOGIN -->
<div class="container" id="loginSection">
<h1>NCAT Crash Course E-Testing</h1>

<label>Student Name</label><br>
<input id="studentName"><br><br>

<label>Father Name</label><br>
<input id="fatherName"><br><br>

<label>District</label><br>
<input id="district" placeholder="Enter District"><br><br>

<label>Test Password</label><br>
<input id="testPass" type="password"><br><br>

<button onclick="startTest()">Start Test</button>
</div>

<!-- TEST -->
<div class="container hidden" id="testSection">
<div id="timer"></div>

<p>1. Powerhouse of the cell is?</p>
<input type="radio" name="q1" value="1"> Mitochondria<br>
<input type="radio" name="q1" value="0"> Nucleus<br><br>

<p>2. Photosynthesis occurs in?</p>
<input type="radio" name="q2" value="1"> Chloroplast<br>
<input type="radio" name="q2" value="0"> Ribosome<br><br>

<button onclick="submitTest()">Submit</button>
</div>

<!-- RESULT -->
<div class="container hidden" id="resultSection">
<h2>Result</h2>
<p id="resultText"></p>

<div id="certificate" class="hidden" style="border:2px dashed #000;padding:20px;text-align:center">
<h2>Certificate of Passing</h2>
<p id="certText"></p>
</div>
</div>

<script>
/* SETTINGS */
const TEST_PASSWORD = "NCAT2026";
const TEST_START = new Date('2025-12-14T09:00:00');
const TEST_END   = new Date('2025-12-20T12:00:00');
const DURATION   = 90 * 60;

let timeLeft = DURATION;
let timer;

function startTest(){
  const now = new Date();
  if(now < TEST_START || now > TEST_END){
    alert("Test not active"); return;
  }
  if(testPass.value !== TEST_PASSWORD){
    alert("Wrong Password"); return;
  }
  loginSection.classList.add("hidden");
  testSection.classList.remove("hidden");

  timer = setInterval(()=>{
    timerDisplay = Math.floor(timeLeft/60)+":"+String(timeLeft%60).padStart(2,'0');
    document.getElementById("timer").innerText="Time Left: "+timerDisplay;
    timeLeft--;
    if(timeLeft < 0) submitTest();
  },1000);
}

function submitTest(){
  clearInterval(timer);

  let score = 0;
  document.querySelectorAll("input[type=radio]:checked")
    .forEach(r=>score+=+r.value);

  const total = 2;
  const percent = Math.round(score/total*100);
  const grade = percent>=80?"A":percent>=60?"B":percent>=40?"C":"Fail";

  const name = studentName.value;
  const father = fatherName.value;
  const districtName = district.value;
  const date = new Date().toLocaleString();

  testSection.classList.add("hidden");
  resultSection.classList.remove("hidden");

  resultText.innerText =
  `Score: ${score}/${total} | ${percent}% | Grade: ${grade}`;

  if(grade!=="Fail"){
    certificate.classList.remove("hidden");
    certText.innerText =
    `This certifies that ${name}, S/O ${father}, from ${districtName} has passed the NCAT E-Test.`;
  }

  /* GOOGLE SHEET */
  fetch("YOUR_GOOGLE_SCRIPT_URL",{
    method:"POST",
    body:JSON.stringify({
      name,father,districtName,score,percent,grade,date
    })
  });
}
</script>

</body>
</html>